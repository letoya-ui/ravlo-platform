{% extends "layouts/borrower_base.html" %}
{% block title %}My Documents{% endblock %}
{% block content %}

<div class="b-main-inner">

  <h2>ðŸ“„ My Documents</h2>
  <p class="muted">View, manage, and delete documents youâ€™ve uploaded.</p>

  {% if ai_summary %}
    <div class="b-card is-light" style="margin-top:1rem;">
      <strong>AI Summary</strong>
      <p style="margin-top:.5rem;">{{ ai_summary }}</p>
    </div>
  {% endif %}

  <div class="b-card" style="margin-top:1.5rem;">
    {% if documents %}
      <table style="width:100%; border-collapse:collapse; font-size:.95rem;">
        <thead>
          <tr style="text-align:left; border-bottom:1px solid var(--line);">
            <th style="padding:.5rem 0;">Name</th>
            <th style="padding:.5rem 0;">Type</th>
            <th style="padding:.5rem 0;">Status</th>
            <th style="padding:.5rem 0;">Uploaded</th>
            <th style="padding:.5rem 0; text-align:right;">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for doc in documents %}
          <tr style="border-bottom:1px solid rgba(255,255,255,0.04);">
            <td style="padding:.5rem 0;">{{ doc.file_path }}</td>
            <td style="padding:.5rem 0;">{{ doc.doc_type or "â€”" }}</td>
            <td style="padding:.5rem 0;">{{ doc.status or "uploaded" }}</td>
            <td style="padding:.5rem 0;">
              {{ doc.created_at.strftime('%b %d, %Y') if doc.created_at else "â€”" }}
            </td>
            <td style="padding:.5rem 0; text-align:right;">
              <form method="POST"
                    action="{{ url_for('borrower.delete_document', doc_id=doc.id) }}"
                    style="display:inline;">
                {{ csrf_token() if csrf_token is defined }}
                <button type="submit"
                        class="btn"
                        style="background:#b91c1c; border:none; padding:.35rem .7rem; font-size:.8rem;">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="muted">You havenâ€™t uploaded any documents yet.</p>
    {% endif %}
  </div>

</div>

{% endblock %}
