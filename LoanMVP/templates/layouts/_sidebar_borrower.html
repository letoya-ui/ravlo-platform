<style>
/* Slim sidebar */
.b-sidebar {
  width: 64px;
  background: #0b0c0f;
  border-right: 1px solid var(--line);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.75rem 0;
  gap: 0.75rem;

  /* THE FIX */
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh; /* full height */
  z-index: 999;  /* stays above content */
}

.b-sidebar-logo {
  width:36px;
  height:36px;
  border-radius:12px;
  background:radial-gradient(circle at 20% 0%, #7ab8ff 0, transparent 55%),
             radial-gradient(circle at 80% 100%, #4a7fff 0, transparent 55%);
  border:1px solid var(--accent-border);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:.8rem;
  font-weight:700;
  margin-bottom:.5rem;
}

.b-sidebar-group {
  display:flex;
  flex-direction:column;
  gap:.4rem;
  margin-top:.5rem;
}

.b-sidebar-item {
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid transparent;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  position:relative;
  transition:.2s;
}

.b-sidebar-item svg {
  width:18px;
  height:18px;
  stroke:#8f94a3;
}

.b-sidebar-item.active,
.b-sidebar-item:hover {
  background:var(--accent-soft);
  border-color:var(--accent-border);
  box-shadow:0 0 14px rgba(122,184,255,0.45);
}

.b-sidebar-item.active svg,
.b-sidebar-item:hover svg {
  stroke:var(--accent);
}

.b-sidebar-footer {
    margin-top: auto;
    padding: 1rem;
}

.b-sidebar-logout {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .75rem 1rem;
    border-radius: var(--radius);
    background: var(--panel);
    border: 1px solid var(--line);
    color: var(--text);
    text-decoration: none;
    transition: .25s ease;
}

.b-sidebar-logout:hover {
    background: var(--hover);
    box-shadow: var(--glow-soft);
}


/* Tooltip text color fix */
.b-tooltip {
  color: var(--text) !important;
  background: #0b0c0f;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 0.75rem;
  white-space: nowrap;
  position: absolute;
  left: 50px;
  opacity: 0;
  pointer-events: none;
  transition: 0.2s ease;
}

/* Show tooltip on hover */
.b-sidebar-item:hover .b-tooltip {
  opacity: 1;
}

</style>

<!-- SIDEBAR (TOOLS) -->
<aside class="b-sidebar">
  <div class="b-sidebar-logo">CM</div>

  <div class="b-sidebar-group">

    <a href="{{ url_for('borrower.dashboard') }}"
       class="b-sidebar-item {% if active_page=='dashboard' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none">
        <rect x="3" y="3" width="8" height="8" rx="2"></rect>
        <rect x="13" y="3" width="8" height="5" rx="2"></rect>
        <rect x="13" y="10" width="8" height="11" rx="2"></rect>
        <rect x="3" y="13" width="8" height="8" rx="2"></rect>
      </svg>
      <div class="b-tooltip">Dashboard</div>
    </a>

    <a href="{{ url_for('borrower.property_search') }}"
       class="b-sidebar-item {% if active_page=='property_finder' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M12 3L4 9v11h16V9l-8-6Z"></path>
        <circle cx="12" cy="13" r="2.5"></circle>
      </svg>
      <div class="b-tooltip">Property Finder</div>
    </a>

    <a href="{{ url_for('borrower.borrower_command_center') }}"
       class="b-sidebar-item {% if active_page=='partner_network' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none">
        <circle cx="8" cy="8" r="3"></circle>
        <circle cx="16" cy="8" r="3"></circle>
        <path d="M4 19c.6-2.4 2.3-4 4-4s3.4 1.6 4 4"></path>
        <path d="M12 19c.6-2.4 2.3-4 4-4s3.4 1.6 4 4"></path>
      </svg>
      <div class="b-tooltip">Partner Network</div>
    </a>

    <a href="{{ url_for('borrower.deal_workspace') }}"
       class="b-sidebar-item {% if active_page=='deal_workspace' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none">
        <rect x="4" y="4" width="16" height="16" rx="2"></rect>
        <path d="M8 9h8M8 13h5M8 17h3"></path>
      </svg>
      <div class="b-tooltip">Project Planner</div>
    </a>

    <a href="{{ url_for('borrower.deals_list') }}"
       class="b-sidebar-item {% if active_page=='saved_deals' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M7 4h10a2 2 0 0 1 2 2v16l-7-3-7 3V6a2 2 0 0 1 2-2Z"></path>
      </svg>
      <div class="b-tooltip">Saved Deals</div>
    </a>

    <a href="{{ url_for('borrower.saved_properties') }}"
       class="b-sidebar-item {% if active_page=='saved_properties' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M12 20s-4.5-2.7-6.7-5.4C3.4 13 3 11.9 3 10.8 3 8.7 4.7 7 6.8 7c1.2 0 2.3.6 3 1.5.7-.9 1.8-1.5 3-1.5C15.3 7 17 8.7 17 10.8c0 1.1-.4 2.2-2.3 3.8C16.5 17.3 12 20 12 20Z"></path>
      </svg>
      <div class="b-tooltip">Saved Properties</div>
    </a>

    <a href="{{ url_for('borrower.borrower_command_center') }}" class="b-sidebar-item">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M5 4h10a3 3 0 0 1 3 3v13l-4-2-4 2-4-2-4 2V7a3 3 0 0 1 3-3Z"></path>
      </svg>
      <div class="b-tooltip">Command Center</div>
    </a>

  </div>

  <!-- ✅ FOOTER INSIDE SIDEBAR -->
  <div class="b-sidebar-footer">
    <a href="{{ url_for('auth.logout') }}" class="b-sidebar-logout">
      <span style="font-size:1rem;">⟲</span>
      <span>Logout</span>
    </a>
  </div>

</aside>